<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      2.2.&nbsp;Prérequis du système hôte
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body class="lfs" id="lfs-8.0">
    <div class="navheader">
      <h4>
        Linux From Scratch - Version 8.0
      </h4>
      <h3>
        Chapitre&nbsp;2.&nbsp;Préparation du système hôte
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="introduction.html" title=
          "Introduction">Précédent</a>
          <p>
            Introduction
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="stages.html" title=
          "Les étapes de la construction de LFS">Suivant</a>
          <p>
            Les étapes de la construction de LFS
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter02.html" title=
          "Chapitre&nbsp;2.&nbsp;Préparation du système hôte">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version 8.0 ">Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="pre-hostreqs" name="pre-hostreqs"></a>2.2. Prérequis du
        système hôte
      </h1>
      <p>
        Votre système hôte doit contenir les logiciels suivants dans leur
        version minimum indiquée. Cela ne devrait pas poser de problème sur
        la plupart des distributions Linux modernes. Noter également que
        certaines distributions placeront les en-têtes des logiciels dans un
        répertoire distinct des paquets, ayant souvent la forme <span class=
        "quote">«&nbsp;<span class=
        "quote">&lt;nom-du-paquet&gt;-devel</span>&nbsp;»</span> ou
        <span class="quote">«&nbsp;<span class=
        "quote">&lt;nom-du-paquet&gt;-dev</span>&nbsp;»</span>. Assurez-vous
        qu'ils sont installés si votre distribution les fournit.
      </p>
      <p>
        Il se peut que les versions antérieures des paquets logiciels listés
        fonctionnent mais elles n'ont pas été testées.
      </p>
      <div class="itemizedlist">
        <ul class="compact">
          <li class="listitem">
            <p>
              <span class="strong"><strong>Bash-3.2</strong></span> (/bin/sh
              devrait être un lien symbolique ou physique vers bash)
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Binutils-2.17</strong></span> (les
              versions supérieures à 2.27 ne sont pas recommandées car elles
              n'ont pas été testées)
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Bison-2.3</strong></span>
              (/usr/bin/yacc devrait être un lien vers bison ou un petit
              script qui exécute bison)
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Bzip2-1.0.4</strong></span>
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Coreutils-6.9</strong></span>
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Diffutils-2.8.1</strong></span>
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Findutils-4.2.31</strong></span>
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Gawk-4.0.1</strong></span>
              (/usr/bin/awk devrait être un lien vers gawk)
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>GCC-4.7</strong></span>, y compris
              le compilateur C++ <span class=
              "command"><strong>g++</strong></span> (les versions supérieures
              à 6.3.0 ne sont pas recommandées car elles n'ont pas été
              testées)
            </p>
            <div class="admon note">
              <img alt="[Note]" src="../images/note.png" />
              <h3>
                Note
              </h3>
              <p>
                Sur certaines distributions, il nous a été signalé que des
                bibliothèques utilisées par gcc pouvaient être incohérentes,
                ce qui influe sur la construction de certains paquets de LFS.
                Pour le vérifier, cherchez dans /usr/lib ou dans /usr/lib64
                libgmp.la, libmpfr.la, et libmpc.la. Elles devraient soit
                être toutes présentes ou toutes absentes, mais il ne devrait
                pas y en n'avoir qu'une ou deux. Si vous rencontrez le
                problème sur votre système, renommez ou effacez les fichiers
                .la, ou bien installez le paquet qui manque.
              </p>
            </div>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Glibc-2.11</strong></span> (les
              versions supérieures à 2.25 ne sont pas recommandées car elles
              n'ont pas été testées)
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Grep-2.5.1a</strong></span>
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Gzip-1.3.12</strong></span>
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Linux
              Kernel-2.6.32</strong></span>
            </p>
            <p>
              Cette version du noyau est requise car nous spécifions cette
              version-là lors de la construction de <span class=
              "application">glibc</span> au chapitre 6, suivant ainsi une
              recommandation des développeurs. Elle est aussi exigée par Udev
            </p>
            <p>
              Si le noyau hôte est plus ancien que le 2.6.32, vous devrez
              remplacer le noyau par une version plus à jour. Vous pouvez
              employer deux méthodes pour cela. Vous pouvez d'abord voir si
              votre distribution Linux fournit un paquet pour le noyau 2.6.32
              ou supérieur. Si tel est le cas, vous pouvez l'installer. Si
              votre distribution n'offre pas un paquet acceptable pour le
              noyau, ou si vous préférez l'installer, vous pouvez compiler un
              noyau 2.6 vous-même. Les instructions pour la compilation du
              noyau et la configuration du chargeur de démarrage (en
              supposant que le système hôte utilise GRUB) sont au <a class=
              "xref" href="../chapter08/chapter08.html" title=
              "Chapitre&nbsp;8.&nbsp;Rendre le système LFS amorçable">Chapitre
              8</a>.
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>M4-1.4.10</strong></span>
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Make-3.81</strong></span>
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Patch-2.5.4</strong></span>
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Perl-5.8.8</strong></span>
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Sed-4.1.5</strong></span>
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Tar-1.22</strong></span>
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Texinfo-4.7</strong></span>
            </p>
          </li>
          <li class="listitem">
            <p>
              <span class="strong"><strong>Xz-5.0.0</strong></span>
            </p>
          </li>
        </ul>
      </div>
      <div class="admon important">
        <img alt="[Important]" src="../images/important.png" />
        <h3>
          Important
        </h3>
        <p>
          Remarquez que les liens symboliques mentionnés ci-dessus sont
          nécessaires pour construire un système LFS en utilisant les
          instructions contenues à l'intérieur de ce livre. Il se peut que
          les liens symboliques pointent vers d'autres logiciels (comme dash,
          mawk, etc), mais ils n'ont pas été testés ou supportés par l'équipe
          de développement LFS et il se peut qu'ils impliquent d'autres
          déviations par rapport aux instructions ou des correctifs
          supplémentaires pour certains paquets.
        </p>
      </div>
      <h2>
        <a id="version-check" name="version-check"></a>
      </h2>
      <p>
        Pour voir si votre système hôte a toutes les versions nécessaires,
        exécutez ceci&nbsp;:
      </p>
      <pre class="userinput">
<kbd class="command">cat &gt; version-check.sh &lt;&lt; "EOF"
<code class="literal">#!/bin/bash
# Simple script to list version numbers of critical development tools
export LC_ALL=C
bash --version | head -n1 | cut -d" " -f2-4
MYSH=$(readlink -f /bin/sh)
echo "/bin/sh -&gt; $MYSH"
echo $MYSH | grep -q bash || echo "ERROR: /bin/sh does not point to bash"
unset MYSH

echo -n "Binutils: "; ld --version | head -n1 | cut -d" " -f3-
bison --version | head -n1

if [ -h /usr/bin/yacc ]; then
  echo "/usr/bin/yacc -&gt; `readlink -f /usr/bin/yacc`";
elif [ -x /usr/bin/yacc ]; then
  echo yacc is `/usr/bin/yacc --version | head -n1`
else
  echo "yacc not found"
fi
bzip2 --version 2&gt;&amp;1 &lt; /dev/null | head -n1 | cut -d" " -f1,6-
echo -n "Coreutils: "; chown --version | head -n1 | cut -d")" -f2
diff --version | head -n1
find --version | head -n1
gawk --version | head -n1
if [ -h /usr/bin/awk ]; then
  echo "/usr/bin/awk -&gt; `readlink -f /usr/bin/awk`";
elif [ -x /usr/bin/awk ]; then
  echo awk is `/usr/bin/awk --version | head -n1`
else
  echo "awk not found"
fi
gcc --version | head -n1
g++ --version | head -n1
ldd --version | head -n1 | cut -d" " -f2-  # glibc version
grep --version | head -n1
gzip --version | head -n1
cat /proc/version
m4 --version | head -n1
make --version | head -n1
patch --version | head -n1
echo Perl `perl -V:version`
sed --version | head -n1
tar --version | head -n1
makeinfo --version | head -n1
xz --version | head -n1


echo 'int main(){}' &gt; dummy.c &amp;&amp; g++ -o dummy dummy.c
if [ -x dummy ]
  then echo "g++ compilation OK";
  else echo "g++ compilation failed"; fi
rm -f dummy.c dummy</code>
EOF

bash version-check.sh</kbd></pre>
      <p>
        Vérifiez la cohérence de certaines bibliothèques&nbsp;:
      </p>
      <pre class="userinput"><kbd class=
      "command">cat &gt; library-check.sh &lt;&lt; "EOF"
<code class="literal">#!/bin/bash
for lib in lib{gmp,mpfr,mpc}.la; do
  echo $lib: $(if find /usr/lib* -name $lib|
               grep -q $lib;then :;else echo not;fi) found
done
unset lib</code>
EOF

bash library-check.sh</kbd></pre>
      <p>
        Les fichiers identifiés par ce script devraient être soit tous
        présents soit tous absents, mais pas partiellement (un ou deux).
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="introduction.html" title=
          "Introduction">Précédent</a>
          <p>
            Introduction
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="stages.html" title=
          "Les étapes de la construction de LFS">Suivant</a>
          <p>
            Les étapes de la construction de LFS
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter02.html" title=
          "Chapitre&nbsp;2.&nbsp;Préparation du système hôte">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version 8.0 ">Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
